<div class="container mx-auto px-4 py-8">
  <div class="flex justify-between items-center mb-8">
    <h1 class="text-4xl font-bold">Venues</h1>

    <%= link_to new_venue_path, class: "btn btn-primary" do %>
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a 1 1 0 110 2h-5v5a 1 1 0 11-2 0v-5H4a 1 1 0 110-2h5V4a 1 1 0 011-1z" clip-rule="evenodd" />
      </svg>
      New Venue
    <% end %>
  </div>

  <% if @venues.empty? %>
    <div class="hero bg-base-200 rounded-box">
      <div class="hero-content text-center">
        <div class="max-w-md">
          <h2 class="text-2xl font-bold">No venues yet</h2>
          <p class="py-6">Add your first venue to start organizing your flyer archive.</p>
          <%= link_to "Add First Venue", new_venue_path, class: "btn btn-primary" %>
        </div>
      </div>
    </div>
  <% else %>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      <% @venues.each do |venue| %>
        <div class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow">
          <div class="card-body">
            <h2 class="card-title flex flex-col">
              <%= venue.name %>
              <% if venue.city.present? %>
                <span class="text-sm text-base-content/70">
                  <%= venue.city %>, <%= venue.state %>
                </span>
              <% end %>
            </h2>

            <%# if venue.website.present? %>
              <div class="text-sm mt-2">
                <%#= link_to venue.website, venue.website,
                      class: "link link-primary",
                      target: "_blank" %>
              </div>
            <%# end %>

            <%# if venue.notes.present? %>
              <p class="text-base-content/70 text-sm mt-2">
                <%#= truncate(venue.notes, length: 120) %>
              </p>
            <%# end %>

            <% if venue.flyers.any? %>
              <div class="mt-3">
                <p class="text-xs text-base-content/60">Flyers:</p>
                <div class="flex flex-wrap gap-1 mt-1">
                  <% venue.flyers.limit(5).each do |flyer| %>
                    <%= link_to flyer.title, flyer_path(flyer),
                        class: "badge badge-outline hover:badge-primary" %>
                  <% end %>

                  <% if venue.flyers.count > 5 %>
                    <span class="badge badge-outline">
                      + <%= venue.flyers.count - 5 %> more
                    </span>
                  <% end %>
                </div>
              </div>
            <% end %>

            <div class="card-actions justify-end mt-4">
              <%= link_to "View", venue_path(venue), class: "btn btn-sm btn-primary" %>
              <%#= link_to "Edit", edit_venue_path(venue), class: "btn btn-sm btn-ghost" %>
              <%= button_to "Delete", venue_path(venue),
                    method: :delete,
                    data: { turbo_confirm: "Are you sure?" },
                    class: "btn btn-sm btn-ghost text-error" %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  <% end %>
</div>
